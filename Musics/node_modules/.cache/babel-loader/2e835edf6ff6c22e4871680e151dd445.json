{"ast":null,"code":"var _jsxFileName = \"/Users/bashaier.alhassani/Desktop/deezer-music/Music/src/Routes.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport DetailsAlbum from \"./components/DetailsAlbum\";\nimport FavoritesAlbums from \"./components/FavoritesAlbums\";\nimport { Signin } from \"./components/auth/Signin\";\nimport { Signup } from \"./components/auth/Signup\";\nimport Forgot from \"./components/auth/Forgot\";\nimport Reset from \"./components/auth/Reset\";\nimport Profile from \"./components/Profile\";\nimport Header from \"./components/widgets/Header\";\nimport jwt_decode from \"jwt-decode\";\nimport Axios from \"axios\";\nexport default class Routes extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null,\n      isSignin: false\n    };\n\n    this.userSignin = signin => {\n      console.log(\"inside\");\n      console.log(!localStorage.token);\n\n      if (!localStorage.token) {\n        console.log(\"no token\");\n        Axios.post(\"http://localhost:8001/user/signin\", signin).then(res => {\n          if (res.data.token) {\n            localStorage.setItem(\"token\", res.data.token); // let status = props.userSignin();\n\n            let user = jwt_decode(res.data.token, \"SECRET\").user;\n            console.log(\"user Signin\", user);\n            this.setState({\n              user: user,\n              isSignin: true\n            });\n            return true;\n          } else {\n            return false;\n            console.log(\"email or password not correct\");\n          }\n        }).catch(err => console.log(err));\n      } // else {\n      //   this.setState({\n      //     user: null,\n      //     isSignin: false,\n      //   });\n      // }\n\n    };\n  }\n\n  componentDidMount() {\n    this.userSignin();\n  }\n\n  render() {\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      isSignin: this.state.isSignin,\n      userSignin: this.userSignin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }), \"\\u2029\", /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/signin\",\n      render: props => /*#__PURE__*/React.createElement(Signin, Object.assign({}, props, {\n        userSignin: this.userSignin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/forgot\",\n      component: Forgot,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/reset/:token\",\n      render: props => /*#__PURE__*/React.createElement(Reset, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 32\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      component: Signup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      component: Profile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      component: Home,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/details/:id\",\n      exact: true,\n      component: DetailsAlbum,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/favorites\",\n      exact: true,\n      component: FavoritesAlbums,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }), this.state.isSignin ? /*#__PURE__*/React.createElement(React.Fragment, null, \" \", /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/favorites\",\n      component: FavoritesAlbums,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }), \" \", /*#__PURE__*/React.createElement(Route, {\n      path: \"/profile\",\n      render: Profile => /*#__PURE__*/React.createElement(Profile, {\n        user: this.state.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 38\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }), \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, \" \", /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/signin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }), \" \")));\n  }\n\n}","map":{"version":3,"sources":["/Users/bashaier.alhassani/Desktop/deezer-music/Music/src/Routes.js"],"names":["React","Component","Switch","Route","Redirect","Home","DetailsAlbum","FavoritesAlbums","Signin","Signup","Forgot","Reset","Profile","Header","jwt_decode","Axios","Routes","state","user","isSignin","userSignin","signin","console","log","localStorage","token","post","then","res","data","setItem","setState","catch","err","componentDidMount","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport DetailsAlbum from \"./components/DetailsAlbum\";\nimport FavoritesAlbums from \"./components/FavoritesAlbums\";\nimport { Signin } from \"./components/auth/Signin\";\nimport { Signup } from \"./components/auth/Signup\";\nimport Forgot from \"./components/auth/Forgot\";\nimport Reset from \"./components/auth/Reset\";\nimport Profile from \"./components/Profile\";\nimport Header from \"./components/widgets/Header\";\nimport jwt_decode from \"jwt-decode\";\nimport Axios from \"axios\";\n\nexport default class Routes extends Component {\n  state = {\n    user: null,\n    isSignin: false,\n  };\n  componentDidMount() {\n    this.userSignin();\n  }\n  userSignin = (signin) => {\n    console.log(\"inside\")\n    console.log(!localStorage.token)\n    if (!localStorage.token) {\n      console.log(\"no token\")\n      Axios.post(\"http://localhost:8001/user/signin\", signin)\n        .then((res) => {\n          if (res.data.token) {\n            localStorage.setItem(\"token\", res.data.token);\n            // let status = props.userSignin();\n            let user = jwt_decode(res.data.token, \"SECRET\").user;\n            console.log(\"user Signin\", user);\n            this.setState({\n              user: user,\n              isSignin: true,\n            });\n            return true;\n          } else {\n            return false;\n            console.log(\"email or password not correct\");\n          }\n        })\n        .catch((err) => console.log(err));\n    } \n    // else {\n    //   this.setState({\n    //     user: null,\n    //     isSignin: false,\n    //   });\n    // }\n  };\n  \n  render() {\n    console.log(this.state);\n    return (\n      <div>\n        <Header isSignin={this.state.isSignin} userSignin={this.userSignin} /> \n        <Switch>\n          <Route\n            path=\"/signin\"\n            render={(props) => (\n\n              <Signin {...props} userSignin={this.userSignin} />\n            )}\n          />\n          {/* <Route path=\"/signin\" component={Signin} /> */}\n          <Route path=\"/forgot\" component={Forgot} />\n          <Route\n            exact\n            path=\"/reset/:token\"\n            render={(props) => <Reset {...props} />}\n          />\n          <Route path=\"/signup\" component={Signup} />\n          <Route path=\"/profile\" component={Profile} />\n\n          <Route path=\"/\" exact component={Home} />\n          <Route path=\"/details/:id\" exact component={DetailsAlbum} />\n          <Route path=\"/favorites\" exact component={FavoritesAlbums} />\n          {this.state.isSignin ? (\n            <>\n              {\" \"}\n              <Route exact path=\"/favorites\" component={FavoritesAlbums} />{\" \"}\n              <Route\n                path=\"/profile\"\n                render={(Profile) => <Profile user={this.state.user} />}\n              />{\" \"}\n            </>\n          ) : (\n            <>\n              {\" \"}\n              <Redirect to=\"/signin\" />{\" \"}\n            </>\n          )}\n        </Switch>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}